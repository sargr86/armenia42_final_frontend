<table mat-table [dataSource]="dataSrc" class="mat-elevation-z8">
  <ng-container *ngFor="let col of cols">
    <ng-container matColumnDef="{{col}}">
      <th mat-header-cell *matHeaderCellDef [textContent]="col|translate:{symbol:''}"></th>
      <td mat-cell *matCellDef="let el">

        <!-- Image cell-->
        <ng-container *ngIf="col.includes('img')&& el[col];else textValues">
          <div class="imgContainer">
            <div [style.background]="getImgUrl(el,col)"
              (click)="navigateToImg(el)"   class="img"></div>
          </div>
        </ng-container>

        <!-- Regular text values cells -->
        <ng-template #textValues>

          <!-- User & story/image statuses -->
          <ng-container *ngIf="col.includes('status');else regularValues">
            <p *ngIf="col==='users_status'" class="status {{el[col]['name_en']}}">{{el[col]['name_'+lang]}}</p>
            <p *ngIf="col==='review_status'" class="status {{el[col]['name_en']}}">{{el[col]['name_'+lang]}}</p>
          </ng-container>

          <ng-template #regularValues>
            <ng-container *ngIf="col=='count'">{{el[col]}}</ng-container>
            <ng-container *ngIf="col!='count'">
              <!-- User full name cell-->
              <span *ngIf="col=='full_name'">{{el[col]?el[col]:el['user'][col]}}</span>

              <!-- Story name cell-->
              <span *ngIf="col=='location'">{{el[col]?el[col]['name_'+lang]:''}}</span>

              <!-- Story name cell-->
              <span *ngIf="col=='story'">{{el[col]?el[col]['name_'+lang]:''}}</span>

              <!-- The rest cells -->
              <span *ngIf="col!='full_name' && col!='story' && col!='location'">{{el[col]|translate:getSymbol()}}</span>
            </ng-container>
          </ng-template>
        </ng-template>

        <!-- Action buttons -->
        <ng-container *ngIf="col=='actions'">
          <mat-slide-toggle class="statusToggler" [checked]="el.users_status.name_en=='active'"
                            (change)="changeStatus($event,el.id)"></mat-slide-toggle>
        </ng-container>
        <ng-container *ngIf="col=='img_actions'">
          <button class="approve">
            <i class="fa fa-check"></i>
          </button>
          <button class="reject">
            <i class="fa fa-times"></i>
          </button>
        </ng-container>
      </td>
    </ng-container>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="cols"></tr>
  <tr mat-row *matRowDef="let row; columns: cols;"></tr>
</table>
<mat-paginator [pageSizeOptions]="[3, 10, 20]" showFirstLastButtons></mat-paginator>
